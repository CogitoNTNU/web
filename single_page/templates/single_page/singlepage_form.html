{% extends 'web/base.html' %}
{% load helpers %}

{% block title %}New {{ view.model|get_class|lower }}{% endblock %}
{% block og_title %}New {{ view.model|get_class|lower }}{% endblock %}

{% block body %}
<div class="ui text container">
    <form class="ui form" method="POST" enctype="multipart/form-data">
        <h1>{{ view.model|get_class }} form</h1>
        {% csrf_token %}
        {{ form.media }}
        {{ form.as_p }}
        <button type="submit" class="big ui primary button">Save</button>
    </form>
</div>

<script>

/*
function check_unique_url(url) {
    $.ajax({
        url: '',
        data: {
            'url': url.val(),
        },
        dataType: 'json',
        success: function(data) {
            console.log(data)
            if (data.url_taken) {
                url[0].setCustomValidity('This url already resolves to some other page');
            } else {
                url[0].setCustomValidity("");
            }
        }
    })
}

$("#id_slug").change(function () {
    let url_field = $(this);
    check_unique_url(url_field);

});
*/

</script>
{% endblock %}