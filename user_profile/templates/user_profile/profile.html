{% extends 'web/base.html' %}
{% load staticfiles %}
{% load helpers %}

{% block title %}Profile{% endblock %}
{% block og_title %}Profile{% endblock %}

{% block body %}

<div class="ui text container">

    <h1>{{ profile.user }}</h1>

    {% if profile.picture %}
        <img class="small bordered rounded ui image" src="../media/{{ profile.picture.name }}">
    {% else %}
        <img class="small bordered rounded ui image" src="/static/web/img/avatar_placeholder.png">
    {% endif %}

    {% if profile.committee %}
        <h4>{{ profile.committee }}</h4>
    {% else %}
        <h4><em>Non-member</em></h4>
    {% endif %}

    <h3>Projects</h3>
    {% if profile.projects.all %}
        <p> {% for project in profile.projects.all %}
            <a href="{% url "project" pk=project.pk %}">{{ project.title }}</a>,
        {% endfor %} </p>
    {% else %}
        <p><em>No projects listed</em></p>
    {% endif %}

    <h3>Skills</h3>
    {% if profile.skills.all %}
        <p>{% for skill in profile.skills.all %}
            <a href="{% url "skill" pk=skill.pk %}">{{ skill.name }}</a>,
        {% endfor %}</p>
    {% else %}
        <p><em>No skills listed</em></p>
    {% endif %}
    {% if edit %}
        <button type="button" onclick="show_modal()" class="ui blue button">Edit</button>
    {% endif %}


    <div class="ui modal">
        <div class="ui text container">
            <form class="ui form" method="POST" enctype="multipart/form-data">
                <h1>New {{ view.model|get_class|lower }}</h1>
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="ui primary button">Save</button>
                <button type="reset" onclick="hide_modal()" class="ui button">Cancel</button>
            </form>
        </div>
    </div>

    <script>
        function show_modal() {
            $('.ui.modal').modal('show');
        }
        function hide_modal() {
            $('.ui.modal').modal('hide');
        }
        $('.ui.dropdown').dropdown();
    </script>
</div>

{% endblock %}